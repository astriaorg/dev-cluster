apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Values.rollupName }}-conductor-env
  namespace: astria-dev-cluster
data:
  home_dir: "/home/conductor"
  executor_host_grpc_port: "{{ .Values.ports.executionGRPC }}"
  gossipnet_port: "{{ .Values.ports.gossipnet }}"
  cometbft_rpc_endpoint: "http://sequencer-service:26657"
  celestia_node_url: "http://celestia-service:26658"
  evm_chain_id: "{{ .Values.evmChainId }}"
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Values.rollupName }}-conductor-scripts
  namespace: astria-dev-cluster
data:
  start-conductor.sh: |
    {{- .Files.Get "files/scripts/start-conductor.sh" | nindent 4 }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Values.rollupName }}-geth-env
  namespace: astria-dev-cluster
data:
  home_dir: "/home/geth"
  data_dir: "/home/geth/{{ .Values.rollupName }}geth"
  executor_host_http_port: "{{ .Values.ports.jsonRPC }}"
  executor_host_grpc_port: "{{ .Values.ports.executionGRPC }}"
  executor_host_ws_port: "{{ .Values.ports.wsRPC }}"
  genesis_alloc_address: "{{ .Values.genesisAllocAddress }}"
  evm_network_id: "{{ .Values.evmNetworkId }}"
  evm_chain_id: "{{ .Values.evmChainId }}"
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Values.rollupName }}-executor-scripts
  namespace: astria-dev-cluster
data:
  geth-genesis.json: |
    {{- tpl (.Files.Get "files/genesis/geth-genesis.json") $ | nindent 4 }}
  init-geth.sh: |
    {{- .Files.Get "files/scripts/init-geth.sh" | nindent 4 }}
  start-geth.sh: |
    {{- .Files.Get "files/scripts/start-geth.sh" | nindent 4 }}
---
